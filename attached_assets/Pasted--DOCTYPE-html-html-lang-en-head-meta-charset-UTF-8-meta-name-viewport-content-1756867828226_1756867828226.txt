<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escrow Management - Brill Prime Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --button-color: rgb(70, 130, 180);
            --deep-blue-color: rgb(11, 26, 81);
            --card-color: rgb(232, 233, 235);
            --light-text-color: rgb(78, 82, 95);
            --black-text-color: rgb(13, 13, 13);
            --savings-green: rgb(27, 151, 84);
            --error-color: rgb(200, 16, 46);
        }

        .montserrat { font-family: 'Montserrat', sans-serif; }
        .curved-card { border-radius: 25px; }
        .curved-button { border-radius: 25px; }
        .status-active { background-color: rgba(27, 151, 84, 0.1); color: rgb(27, 151, 84); }
        .status-disputed { background-color: rgba(200, 16, 46, 0.1); color: rgb(200, 16, 46); }
        .status-pending { background-color: rgba(245, 158, 11, 0.1); color: #d97706; }
        .status-released { background-color: rgba(107, 114, 128, 0.1); color: rgb(107, 114, 128); }
        .modal-overlay { background-color: rgba(19, 19, 19, 0.8); }
    </style>
</head>
<body class="bg-gray-50 min-h-screen montserrat">
    <!-- Dispute Resolution Modal -->
    <div id="disputeModal" class="fixed inset-0 modal-overlay flex items-center justify-center z-50 hidden">
        <div class="bg-white curved-card shadow-xl max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="p-6 border-b">
                <div class="flex items-center justify-between">
                    <h2 class="text-xl font-bold" style="color: var(--deep-blue-color);">Dispute Resolution</h2>
                    <button onclick="closeDisputeModal()" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100">
                        <svg class="w-5 h-5" style="color: var(--light-text-color);" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="p-6">
                <!-- Dispute Details -->
                <div class="mb-6">
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <p class="text-sm font-medium" style="color: var(--light-text-color);">Escrow ID</p>
                            <p class="text-lg font-bold" style="color: var(--black-text-color);">ESC-4521</p>
                        </div>
                        <div>
                            <p class="text-sm font-medium" style="color: var(--light-text-color);">Amount</p>
                            <p class="text-lg font-bold" style="color: var(--black-text-color);">₦45,000</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <p class="text-sm font-medium" style="color: var(--light-text-color);">Customer</p>
                            <p class="font-medium" style="color: var(--black-text-color);">John Doe</p>
                            <p class="text-xs" style="color: var(--light-text-color);">john.doe@email.com</p>
                        </div>
                        <div>
                            <p class="text-sm font-medium" style="color: var(--light-text-color);">Merchant</p>
                            <p class="font-medium" style="color: var(--black-text-color);">TechStore247</p>
                            <p class="text-xs" style="color: var(--light-text-color);">tech@techstore247.com</p>
                        </div>
                    </div>
                </div>

                <!-- Dispute Timeline -->
                <div class="mb-6">
                    <h3 class="text-lg font-bold mb-4" style="color: var(--deep-blue-color);">Dispute Timeline</h3>
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <div class="w-3 h-3 bg-blue-500 rounded-full mt-1 mr-3"></div>
                            <div>
                                <p class="text-sm font-medium" style="color: var(--black-text-color);">Dispute Filed</p>
                                <p class="text-xs" style="color: var(--light-text-color);">Customer reported product not as described • 2 hours ago</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="w-3 h-3 bg-yellow-500 rounded-full mt-1 mr-3"></div>
                            <div>
                                <p class="text-sm font-medium" style="color: var(--black-text-color);">Merchant Response</p>
                                <p class="text-xs" style="color: var(--light-text-color);">Merchant provided tracking and proof of delivery • 1 hour ago</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="w-3 h-3 bg-red-500 rounded-full mt-1 mr-3"></div>
                            <div>
                                <p class="text-sm font-medium" style="color: var(--black-text-color);">Escalated to Admin</p>
                                <p class="text-xs" style="color: var(--light-text-color);">Automatic escalation due to unresolved dispute • 30 min ago</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Evidence -->
                <div class="mb-6">
                    <h3 class="text-lg font-bold mb-4" style="color: var(--deep-blue-color);">Evidence</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="border curved-card p-4" style="border-color: var(--card-color);">
                            <h4 class="font-medium mb-2" style="color: var(--black-text-color);">Customer Evidence</h4>
                            <div class="space-y-2">
                                <div class="flex items-center p-2 bg-gray-50 rounded">
                                    <svg class="w-4 h-4 mr-2" style="color: var(--light-text-color);" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span class="text-xs">product_received.jpg</span>
                                </div>
                                <div class="flex items-center p-2 bg-gray-50 rounded">
                                    <svg class="w-4 h-4 mr-2" style="color: var(--light-text-color);" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span class="text-xs">damage_photo.jpg</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="border curved-card p-4" style="border-color: var(--card-color);">
                            <h4 class="font-medium mb-2" style="color: var(--black-text-color);">Merchant Evidence</h4>
                            <div class="space-y-2">
                                <div class="flex items-center p-2 bg-gray-50 rounded">
                                    <svg class="w-4 h-4 mr-2" style="color: var(--light-text-color);" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    <span class="text-xs">delivery_receipt.pdf</span>
                                </div>
                                <div class="flex items-center p-2 bg-gray-50 rounded">
                                    <svg class="w-4 h-4 mr-2" style="color: var(--light-text-color);" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span class="text-xs">packaging_photo.jpg</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Admin Actions -->
                <div class="mb-6">
                    <h3 class="text-lg font-bold mb-4" style="color: var(--deep-blue-color);">Resolution Actions</h3>
                    <textarea 
                        class="w-full p-4 border curved-card mb-4 text-sm" 
                        style="border-color: var(--card-color);" 
                        rows="4" 
                        placeholder="Enter admin notes and resolution details..."
                    ></textarea>
                    
                    <div class="grid grid-cols-3 gap-3">
                        <button onclick="resolveDispute('refund')" class="py-3 px-4 bg-red-500 text-white curved-button text-sm font-medium hover:bg-red-600">
                            Refund Customer
                        </button>
                        <button onclick="resolveDispute('release')" class="py-3 px-4 curved-button text-sm font-medium" style="background-color: var(--savings-green); color: white;">
                            Release to Merchant
                        </button>
                        <button onclick="resolveDispute('partial')" class="py-3 px-4 curved-button text-sm font-medium" style="background-color: var(--button-color); color: white;">
                            Partial Refund
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="flex h-screen bg-gray-50">
        <!-- Mini Sidebar -->
        <div class="w-16 bg-white shadow-lg flex flex-col items-center py-4 space-y-4">
            <button onclick="goBack()" class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gray-100">
                <svg class="w-6 h-6" style="color: var(--deep-blue-color);" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                </svg>
            </button>
            
            <div class="w-8 h-8 rounded-lg flex items-center justify-center" style="background-color: var(--deep-blue-color);">
                <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z"></path>
                </svg>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="bg-white shadow-sm border-b p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-2xl font-bold" style="color: var(--deep-blue-color);">Escrow Management</h1>
                        <p class="text-sm" style="color: var(--light-text-color);">Monitor and manage payment escrow transactions</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="text-right">
                            <p class="text-lg font-bold" style="color: var(--black-text-color);">₦12.4M</p>
                            <p class="text-xs" style="color: var(--light-text-color);">Total Escrow Balance</p>
                        </div>
                        <div class="w-px h-8 bg-gray-300"></div>
                        <div class="text-right">
                            <p class="text-lg font-bold text-red-600">7</p>
                            <p class="text-xs" style="color: var(--light-text-color);">Pending Disputes</p>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Filter Tabs -->
            <div class="bg-white px-6 py-4 border-b">
                <div class="flex space-x-4">
                    <button onclick="filterEscrow('all')" class="px-4 py-2 curved-button text-sm font-medium" style="background-color: var(--button-color); color: white;">
                        All Escrow (124)
                    </button>
                    <button onclick="filterEscrow('active')" class="px-4 py-2 curved-button text-sm font-medium border" style="border-color: var(--card-color); color: var(--light-text-color);">
                        Active (89)
                    </button>
                    <button onclick="filterEscrow('disputed')" class="px-4 py-2 curved-button text-sm font-medium border" style="border-color: var(--card-color); color: var(--light-text-color);">
                        Disputed (7)
                    </button>
                    <button onclick="filterEscrow('pending')" class="px-4 py-2 curved-button text-sm font-medium border" style="border-color: var(--card-color); color: var(--light-text-color);">
                        Pending Release (28)
                    </button>
                </div>
            </div>

            <!-- Escrow List -->
            <main class="flex-1 overflow-auto p-6">
                <div class="space-y-4">
                    <!-- Critical Dispute -->
                    <div class="bg-white curved-card shadow-sm p-6 border-l-4 border-red-500">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <div class="flex items-center mb-2">
                                    <h3 class="text-lg font-bold mr-3" style="color: var(--black-text-color);">ESC-4521</h3>
                                    <span class="status-disputed px-3 py-1 rounded-full text-xs font-medium">DISPUTED</span>
                                    <span class="ml-2 px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-bold">CRITICAL</span>
                                </div>
                                <p class="text-sm mb-1" style="color: var(--light-text-color);">
                                    <strong>Customer:</strong> John Doe → <strong>Merchant:</strong> TechStore247
                                </p>
                                <p class="text-sm" style="color: var(--light-text-color);">
                                    Order #1245 • Product not as described • Filed 2 hours ago
                                </p>
                            </div>
                            <div class="text-right">
                                <p class="text-xl font-bold" style="color: var(--black-text-color);">₦45,000</p>
                                <p class="text-xs" style="color: var(--light-text-color);">Held since 3 days ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4 text-xs" style="color: var(--light-text-color);">
                                <span>📁 Evidence: 4 files</span>
                                <span>⏰ Auto-release in: 4 days</span>
                                <span>🔄 Last activity: 30 min ago</span>
                            </div>
                            <button onclick="openDispute('ESC-4521')" class="px-4 py-2 bg-red-500 text-white curved-button text-sm font-medium hover:bg-red-600">
                                Resolve Dispute
                            </button>
                        </div>
                    </div>

                    <!-- Active Escrow -->
                    <div class="bg-white curved-card shadow-sm p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <div class="flex items-center mb-2">
                                    <h3 class="text-lg font-bold mr-3" style="color: var(--black-text-color);">ESC-4520</h3>
                                    <span class="status-active px-3 py-1 rounded-full text-xs font-medium">ACTIVE</span>
                                </div>
                                <p class="text-sm mb-1" style="color: var(--light-text-color);">
                                    <strong>Customer:</strong> Alice Johnson → <strong>Merchant:</strong> QuickMart
                                </p>
                                <p class="text-sm" style="color: var(--light-text-color);">
                                    Order #1244 • Electronics Purchase • Order delivered
                                </p>
                            </div>
                            <div class="text-right">
                                <p class="text-xl font-bold" style="color: var(--black-text-color);">₦18,500</p>
                                <p class="text-xs" style="color: var(--light-text-color);">Held since 1 day ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4 text-xs" style="color: var(--light-text-color);">
                                <span>✅ Delivered successfully</span>
                                <span>⏰ Auto-release in: 6 days</span>
                                <span>⭐ Customer satisfaction pending</span>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="releaseEscrow('ESC-4520')" class="px-4 py-2 curved-button text-sm font-medium" style="background-color: var(--savings-green); color: white;">
                                    Release Early
                                </button>
                                <button onclick="viewDetails('ESC-4520')" class="px-4 py-2 border curved-button text-sm font-medium" style="border-color: var(--card-color); color: var(--button-color);">
                                    View Details
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Pending Release -->
                    <div class="bg-white curved-card shadow-sm p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <div class="flex items-center mb-2">
                                    <h3 class="text-lg font-bold mr-3" style="color: var(--black-text-color);">ESC-4519</h3>
                                    <span class="status-pending px-3 py-1 rounded-full text-xs font-medium">PENDING RELEASE</span>
                                </div>
                                <p class="text-sm mb-1" style="color: var(--light-text-color);">
                                    <strong>Customer:</strong> Mike Wilson → <strong>Merchant:</strong> PhoneHub
                                </p>
                                <p class="text-sm" style="color: var(--light-text-color);">
                                    Order #1243 • Mobile Accessories • Ready for release
                                </p>
                            </div>
                            <div class="text-right">
                                <p class="text-xl font-bold" style="color: var(--black-text-color);">₦8,200</p>
                                <p class="text-xs" style="color: var(--light-text-color);">Held since 7 days ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4 text-xs" style="color: var(--light-text-color);">
                                <span>✅ 7-day holding period complete</span>
                                <span>⭐ 5-star customer rating</span>
                                <span>📝 No disputes filed</span>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="releaseEscrow('ESC-4519')" class="px-4 py-2 curved-button text-sm font-medium" style="background-color: var(--savings-green); color: white;">
                                    Release Funds
                                </button>
                                <button onclick="viewDetails('ESC-4519')" class="px-4 py-2 border curved-button text-sm font-medium" style="border-color: var(--card-color); color: var(--button-color);">
                                    View Details
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Recently Released -->
                    <div class="bg-white curved-card shadow-sm p-6 opacity-75">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <div class="flex items-center mb-2">
                                    <h3 class="text-lg font-bold mr-3" style="color: var(--black-text-color);">ESC-4518</h3>
                                    <span class="status-released px-3 py-1 rounded-full text-xs font-medium">RELEASED</span>
                                </div>
                                <p class="text-sm mb-1" style="color: var(--light-text-color);">
                                    <strong>Customer:</strong> Sarah Chen → <strong>Merchant:</strong> BookStore
                                </p>
                                <p class="text-sm" style="color: var(--light-text-color);">
                                    Order #1242 • Educational Books • Successfully completed
                                </p>
                            </div>
                            <div class="text-right">
                                <p class="text-xl font-bold" style="color: var(--black-text-color);">₦12,800</p>
                                <p class="text-xs" style="color: var(--light-text-color);">Released 2 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4 text-xs" style="color: var(--light-text-color);">
                                <span>✅ Transaction completed</span>
                                <span>💰 Funds transferred to merchant</span>
                                <span>⭐ 5-star rating received</span>
                            </div>
                            <button onclick="viewDetails('ESC-4518')" class="px-4 py-2 border curved-button text-sm font-medium" style="border-color: var(--card-color); color: var(--light-text-color);">
                                View Archive
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Load More -->
                <div class="text-center mt-8">
                    <button class="px-6 py-3 border curved-button text-sm font-medium" style="border-color: var(--card-color); color: var(--button-color);">
                        Load More Transactions
                    </button>
                </div>
            </main>
        </div>
    </div>

    <script>
        function goBack() {
            window.history.back();
        }

        function filterEscrow(status) {
            console.log(`Filtering escrow by: ${status}`);
            // Update active tab styling
            document.querySelectorAll('button[onclick^="filterEscrow"]').forEach(btn => {
                btn.style.backgroundColor = 'transparent';
                btn.style.color = 'var(--light-text-color)';
                btn.style.border = '1px solid var(--card-color)';
            });
            
            event.target.style.backgroundColor = 'var(--button-color)';
            event.target.style.color = 'white';
            event.target.style.border = 'none';
        }

        function openDispute(escrowId) {
            console.log(`Opening dispute for escrow: ${escrowId}`);
            document.getElementById('disputeModal').classList.remove('hidden');
        }

        function closeDisputeModal() {
            document.getElementById('disputeModal').classList.add('hidden');
        }

        function resolveDispute(action) {
            console.log(`Resolving dispute with action: ${action}`);
            closeDisputeModal();
            showToast(`Dispute resolved with ${action} action`, 'success');
        }

        function releaseEscrow(escrowId) {
            console.log(`Releasing escrow: ${escrowId}`);
            if (confirm(`Are you sure you want to release escrow ${escrowId}?`)) {
                showToast('Escrow funds released successfully', 'success');
            }
        }

        function viewDetails(escrowId) {
            console.log(`Viewing details for escrow: ${escrowId}`);
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `fixed top-4 right-4 px-6 py-3 rounded-lg text-white text-sm font-medium z-50 transform transition-all duration-300 translate-x-full`;
            toast.style.backgroundColor = type === 'success' ? 'var(--savings-green)' : type === 'error' ? 'var(--error-color)' : 'var(--button-color)';
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.remove('translate-x-full');
            }, 100);
            
            setTimeout(() => {
                toast.classList.add('translate-x-full');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Close modal when clicking outside
        document.getElementById('disputeModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeDisputeModal();
            }
        });
    </script>
</body>
</html>
